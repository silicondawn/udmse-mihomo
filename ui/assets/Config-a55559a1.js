import{r as O,R as f,p as h,c as ie,d as a,j as c,t as ce,v as H,w as J,L as de,x as K,g as q,y as me,i as X,z as ue,u as he,D as pe,E as x,F as fe,G as ve,H as ge,J as be,K as ye,N as we,O as ke,P as Oe,C as _e,S as j,Q as Ne,T as Ce,B as y,U as xe,V as je,W as Se}from"./index-41a412db.js";import{r as Pe,T as ze}from"./logs-64179499.js";import{S as k}from"./Select-86b37616.js";import{S as Te,I as S,a as Ie}from"./Input-fea57072.js";import{R as P}from"./rotate-cw-8148c71c.js";function T(){return T=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},T.apply(this,arguments)}function Le(e,l){if(e==null)return{};var o=Ee(e,l),n,t;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],!(l.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ee(e,l){if(e==null)return{};var o={},n=Object.keys(e),t,r;for(r=0;r<n.length;r++)t=n[r],!(l.indexOf(t)>=0)&&(o[t]=e[t]);return o}var $=O.forwardRef(function(e,l){var o=e.color,n=o===void 0?"currentColor":o,t=e.size,r=t===void 0?24:t,p=Le(e,["color","size"]);return f.createElement("svg",T({ref:l,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},p),f.createElement("polyline",{points:"8 17 12 21 16 17"}),f.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),f.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"}))});$.propTypes={color:h.string,size:h.oneOfType([h.string,h.number])};$.displayName="DownloadCloud";const Q=$;function I(){return I=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},I.apply(this,arguments)}function $e(e,l){if(e==null)return{};var o=Re(e,l),n,t;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],!(l.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Re(e,l){if(e==null)return{};var o={},n=Object.keys(e),t,r;for(r=0;r<n.length;r++)t=n[r],!(l.indexOf(t)>=0)&&(o[t]=e[t]);return o}var R=O.forwardRef(function(e,l){var o=e.color,n=o===void 0?"currentColor":o,t=e.size,r=t===void 0?24:t,p=$e(e,["color","size"]);return f.createElement("svg",I({ref:l,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},p),f.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),f.createElement("polyline",{points:"16 17 21 12 16 7"}),f.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});R.propTypes={color:h.string,size:h.oneOfType([h.string,h.number])};R.displayName="LogOut";const Me=R;function L(){return L=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},L.apply(this,arguments)}function Ue(e,l){if(e==null)return{};var o=We(e,l),n,t;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],!(l.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function We(e,l){if(e==null)return{};var o={},n=Object.keys(e),t,r;for(r=0;r<n.length;r++)t=n[r],!(l.indexOf(t)>=0)&&(o[t]=e[t]);return o}var M=O.forwardRef(function(e,l){var o=e.color,n=o===void 0?"currentColor":o,t=e.size,r=t===void 0?24:t,p=Ue(e,["color","size"]);return f.createElement("svg",L({ref:l,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},p),f.createElement("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),f.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),f.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"}))});M.propTypes={color:h.string,size:h.oneOfType([h.string,h.number])};M.displayName="Monitor";const Be=M;function E(){return E=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},E.apply(this,arguments)}function De(e,l){if(e==null)return{};var o=Fe(e,l),n,t;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],!(l.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Fe(e,l){if(e==null)return{};var o={},n=Object.keys(e),t,r;for(r=0;r<n.length;r++)t=n[r],!(l.indexOf(t)>=0)&&(o[t]=e[t]);return o}var U=O.forwardRef(function(e,l){var o=e.color,n=o===void 0?"currentColor":o,t=e.size,r=t===void 0?24:t,p=De(e,["color","size"]);return f.createElement("svg",E({ref:l,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},p),f.createElement("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}))});U.propTypes={color:h.string,size:h.oneOfType([h.string,h.number])};U.displayName="Tool";const Ae=U,Ge="_root_mugsf_4",Ve="_section_mugsf_18",He="_wrapSwitch_mugsf_30",Je="_sep_mugsf_36",Qe="_label_mugsf_49",Ke="_sectionTitle_mugsf_57",qe="_card_mugsf_68",i={root:Ge,section:Ve,wrapSwitch:He,sep:Je,label:Qe,sectionTitle:Ke,card:qe},Xe="_fieldset_1hnn2_1",Ye="_input_1hnn2_10",Ze="_cnt_1hnn2_10",z={fieldset:Xe,input:Ye,cnt:Ze};function et({OptionComponent:e,optionPropsList:l,selectedIndex:o,onChange:n}){const t=ie("visually-hidden",z.input),r=p=>{n(p.target.value)};return a("fieldset",{className:z.fieldset,children:l.map((p,d)=>c("label",{children:[a("input",{type:"radio",checked:o===d,name:"selection",value:d,"aria-labelledby":"traffic chart type "+d,onChange:r,className:t}),a("div",{className:z.cnt,children:a(e,{...p})})]},d))})}const{useMemo:tt}=K,nt={responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,type:"category"},y:{display:!1}}},Y=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],rt=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],at=Y.map((e,l)=>l);function lt({id:e}){ce.read();const l=tt(()=>({labels:at,datasets:[{...H,...J[e].up,data:Y},{...H,...J[e].down,data:rt}]}),[e]);return a("div",{style:{width:80,height:40,padding:5},children:a(de,{data:l,options:nt})})}const{useEffect:Z,useState:ot,useCallback:v,useRef:st}=K,it=[{id:0},{id:1},{id:2},{id:3}],ct=[["debug","Debug"],["info","Info"],["warning","Warning"],["error","Error"],["silent","Silent"]],dt=[{key:"port",label:"Http Port"},{key:"socks-port",label:"Socks5 Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"},{key:"mitm-port",label:"MITM Port"}],mt=[["zh-cn","简体中文"],["zh-tw","繁體中文"],["en","English"],["vi","Vietnamese"]],ut=[["direct","Direct"],["rule","Rule"],["script","Script"],["global","Global"]],ht=[["gvisor","gVisor"],["mixed","Mixed"],["system","System"]],pt=e=>({configs:me(e),apiConfig:X(e)}),ft=e=>({selectedChartStyleIndex:je(e),latencyTestUrl:Se(e),apiConfig:X(e)}),vt=q(ft)(yt),Ct=q(pt)(gt);function gt({dispatch:e,configs:l,apiConfig:o}){return Z(()=>{e(ue(o))},[e,o]),a(vt,{configs:l})}function bt(e){return e&&e.meta&&!e.premium?"Clash.Meta ":e&&e.meta&&e.premium?"sing-box ":"Clash Premium"}function yt({dispatch:e,configs:l,selectedChartStyleIndex:o,latencyTestUrl:n,apiConfig:t}){var F,A,G,V;const{t:r,i18n:p}=he(),[d,_]=ot(l),W=st(l);Z(()=>{W.current!==l&&_(l),W.current=l},[l]);const ee=v(()=>{e(pe("apiConfig"))},[e]),N=v((s,m)=>{_({...d,[s]:m})},[d]),B=v((s,m)=>{const g={...d.tun,[s]:m};_({...d,tun:{...g}})},[d]),b=v(({name:s,value:m})=>{switch(s){case"mode":case"log-level":case"allow-lan":case"sniffing":N(s,m),e(x(t,{[s]:m})),s==="log-level"&&Pe({...t,logLevel:m});break;case"mitm-port":case"redir-port":case"socks-port":case"mixed-port":case"port":if(m!==""){const g=parseInt(m,10);if(g<0||g>65535)return}N(s,m);break;case"enable":case"stack":B(s,m),e(x(t,{tun:{[s]:m}}));break;default:return}},[t,e,N,B]),{selectChartStyleIndex:te,updateAppConfig:D}=fe(),w=v(s=>{const{name:m,value:g}=s.target;switch(m){case"port":case"socks-port":case"mixed-port":case"redir-port":case"mitm-port":{const C=parseInt(g,10);if(C<0||C>65535)return;e(x(t,{[m]:C}));break}case"latencyTestUrl":{D(m,g);break}case"device name":case"interface name":break;default:throw new Error(`unknown input name ${m}`)}},[t,e,D]),ne=v(()=>{e(ve(t))},[t,e]),re=v(()=>{e(ge(t))},[t,e]),ae=v(()=>{e(be(t))},[t,e]),le=v(()=>{e(ye(t))},[t,e]),oe=v(()=>{e(we(t))},[t,e]),se=v(()=>{e(ke(t))},[t,e]),{data:u}=Oe(["/version",t],()=>xe("/version",t));return c("div",{children:[a(_e,{}),c("div",{className:i.root,children:[c("div",{className:i.card,children:[c("div",{className:i.sectionTitle,children:[a(Te,{size:20}),r("general")]}),c("div",{className:i.section,children:[u.meta&&u.premium||dt.map(s=>d[s.key]!==void 0?c("div",{children:[a("div",{className:i.label,children:s.label}),a(S,{name:s.key,value:d[s.key],onChange:({target:{name:m,value:g}})=>b({name:m,value:g}),onBlur:w})]},s.key):null),c("div",{children:[a("div",{className:i.label,children:"Mode"}),a(k,{options:d["mode-list"]?d["mode-list"].map(s=>[s,s]):ut,selected:d["mode-list"]?d.mode:d.mode.toLowerCase(),onChange:s=>b({name:"mode",value:s.target.value})})]}),c("div",{children:[a("div",{className:i.label,children:"Log Level"}),a(k,{options:ct,selected:d["log-level"].toLowerCase(),onChange:s=>b({name:"log-level",value:s.target.value})})]}),u.meta&&u.premium||c("div",{children:[a("div",{className:i.label,children:r("allow_lan")}),a("div",{className:i.wrapSwitch,children:a(j,{name:"allow-lan",checked:d["allow-lan"],onChange:s=>b({name:"allow-lan",value:s})})})]}),u.meta&&!u.premium&&c("div",{children:[a("div",{className:i.label,children:r("tls_sniffing")}),a("div",{className:i.wrapSwitch,children:a(j,{name:"sniffing",checked:d.sniffing,onChange:s=>b({name:"sniffing",value:s})})})]})]})]}),u.meta&&c(Ne,{children:[u.premium||c("div",{className:i.card,children:[c("div",{className:i.sectionTitle,children:[a(Ce,{size:20}),"TUN"]}),c("div",{className:i.section,children:[c("div",{children:[a("div",{className:i.label,children:r("enable_tun_device")}),a("div",{className:i.wrapSwitch,children:a(j,{checked:(F=d.tun)==null?void 0:F.enable,onChange:s=>b({name:"enable",value:s})})})]}),c("div",{children:[a("div",{className:i.label,children:"TUN IP Stack"}),a(k,{options:ht,selected:(G=(A=d.tun)==null?void 0:A.stack)==null?void 0:G.toLowerCase(),onChange:s=>b({name:"stack",value:s.target.value})})]}),c("div",{children:[a("div",{className:i.label,children:"Device Name"}),a(S,{name:"device name",value:(V=d.tun)==null?void 0:V.device,onChange:w})]}),c("div",{children:[a("div",{className:i.label,children:"Interface Name"}),a(S,{name:"interface name",value:d["interface-name"]||"",onChange:w})]})]})]}),c("div",{className:i.card,children:[c("div",{className:i.sectionTitle,children:[a(Ae,{size:20}),r("management")]}),c("div",{className:i.section,children:[c("div",{children:[a("div",{className:i.label,children:"Reload"}),a(y,{start:a(P,{size:16}),label:r("reload_config_file"),onClick:ne})]}),u.meta&&!u.premium&&c("div",{children:[a("div",{className:i.label,children:"GEO Databases"}),a(y,{start:a(Q,{size:16}),label:r("upgrade_geo"),onClick:le})]}),u.meta&&!u.premium&&c("div",{children:[a("div",{className:i.label,children:"Dashboard UI"}),a(y,{start:a(Q,{size:16}),label:r("upgrade_ui"),onClick:oe})]}),c("div",{children:[a("div",{className:i.label,children:"FakeIP"}),a(y,{start:a(ze,{size:16}),label:r("flush_fake_ip_pool"),onClick:se})]}),u.meta&&!u.premium&&c("div",{children:[a("div",{className:i.label,children:"Restart"}),a(y,{start:a(P,{size:16}),label:r("restart_core"),onClick:re})]}),u.meta&&!u.premium&&c("div",{children:[a("div",{className:i.label,children:"⚠️ Upgrade ⚠️"}),a(y,{start:a(P,{size:16}),label:r("upgrade_core"),onClick:ae})]})]})]})]}),c("div",{className:i.card,children:[c("div",{className:i.sectionTitle,children:[a(Be,{size:20}),r("dashboard")]}),c("div",{className:i.section,children:[c("div",{children:[a("div",{className:i.label,children:r("latency_test_url")}),a(Ie,{name:"latencyTestUrl",type:"text",value:n,onBlur:w,className:""})]}),c("div",{children:[a("div",{className:i.label,children:r("lang")}),a("div",{children:a(k,{options:mt,selected:p.language,onChange:s=>p.changeLanguage(s.target.value)})})]}),c("div",{children:[a("div",{className:i.label,children:r("chart_style")}),a(et,{OptionComponent:lt,optionPropsList:it,selectedIndex:o,onChange:te})]}),c("div",{children:[c("div",{className:i.label,children:[r("current_backend"),a("p",{children:bt(u)+(t==null?void 0:t.baseURL)})]}),a("div",{className:i.label,children:"Action"}),a(y,{start:a(Me,{size:16}),label:r("switch_backend"),onClick:ee})]})]})]})]})]})}export{Ct as default};
